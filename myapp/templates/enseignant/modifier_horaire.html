{% extends "base.html" %}

{% block title %}Modifier Horaire{% endblock %}

{% block content %}
<div class="container mt-4">
    <h3 class="text-center mb-4">Modifier Horaire pour {{ enseignant.nom }} {{ enseignant.prenoms }}</h3>

    {% if messages %}
        {% for message in messages %}
            <div class="alert alert-success">{{ message }}</div>
        {% endfor %}
    {% endif %}

    <div class="table-responsive">
        <table class="table table-bordered table-striped text-center">
            <thead class="table-dark">
                <tr>
                    <th>Classe</th>
                    <th>Jour</th>
                    <th>Heure début</th>
                    <th>Heure fin</th>
                    <th>Action</th>
                </tr>
            </thead>
            <tbody>
                {% for horaire in horaires %}
                <tr>
                    <form method="POST">
                        {% csrf_token %}
                        <input type="hidden" name="horaire_id" value="{{ horaire.id }}">
                        <td>
                            <select name="classe" class="form-control">
                                {% for c in classes %}
                                    <option value="{{ c }}" {% if horaire.classe == c %}selected{% endif %}>{{ c }}</option>
                                {% endfor %}
                            </select>
                        </td>
                        <td>
                            <select name="jour" class="form-control">
                                {% for j in jours %}
                                    <option value="{{ j }}" {% if horaire.jour == j %}selected{% endif %}>{{ j }}</option>
                                {% endfor %}
                            </select>
                        </td>
                        <td><input type="time" name="heure_debut" value="{{ horaire.heure_debut|time:'H:i' }}" class="form-control"></td>
                        <td><input type="time" name="heure_fin" value="{{ horaire.heure_fin|time:'H:i' }}" class="form-control"></td>
                        <td>
                            <button type="submit" class="btn btn-success btn-sm">Modifier</button>
                        </td>
                    </form>
                </tr>
                {% empty %}
                <tr>
                    <td colspan="5" class="text-center">Aucun horaire enregistré.</td>
                </tr>
                {% endfor %}
            </tbody>
        </table>
    </div>

    <div class="mt-3">
        <a href="{% url 'liste_enseignants' %}" class="btn btn-secondary">Retour</a>
    </div>
</div>
{% endblock %}
